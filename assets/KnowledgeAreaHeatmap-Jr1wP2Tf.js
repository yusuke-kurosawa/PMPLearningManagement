import{c as K,R as P,u as U,r as l,s as j,g as S,T as X,A as J,j as a,I as Q,G as V}from"./index-Ao3b0tZm.js";import{s as Z,Y as _,a as ee}from"./YlOrRd-CNLznUkE.js";import{l as te,f as ae}from"./linear-Ds3GZdaL.js";import"./init-Dmth1JHB.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=K("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),ne=P.memo(()=>{const G=U(),f=l.useRef(null),g=l.useRef(null),[c,q]=l.useState("processCount"),[o,T]=l.useState(null),[$,h]=l.useState(null),[u,E]=l.useState({width:1200,height:800}),A=[{id:"processCount",name:"プロセス数",description:"各エリア・グループのプロセス数"},{id:"complexity",name:"複雑度",description:"ITTO関係の複雑さ"},{id:"importance",name:"重要度",description:"PMP試験での出題頻度"},{id:"difficulty",name:"難易度",description:"学習の難しさ"}],y=["立上げ","計画","実行","監視・コントロール","終結"],v=[{id:"integration",name:"統合マネジメント"},{id:"scope",name:"スコープ・マネジメント"},{id:"schedule",name:"スケジュール・マネジメント"},{id:"cost",name:"コスト・マネジメント"},{id:"quality",name:"品質マネジメント"},{id:"resource",name:"資源マネジメント"},{id:"communications",name:"コミュニケーション・マネジメント"},{id:"risk",name:"リスク・マネジメント"},{id:"procurement",name:"調達マネジメント"},{id:"stakeholder",name:"ステークホルダー・マネジメント"}],b=l.useMemo(()=>{const t={processCount:{integration:{立上げ:1,計画:1,実行:2,"監視・コントロール":2,終結:1},scope:{立上げ:0,計画:4,実行:0,"監視・コントロール":2,終結:0},schedule:{立上げ:0,計画:5,実行:0,"監視・コントロール":1,終結:0},cost:{立上げ:0,計画:3,実行:0,"監視・コントロール":1,終結:0},quality:{立上げ:0,計画:1,実行:1,"監視・コントロール":1,終結:0},resource:{立上げ:0,計画:2,実行:3,"監視・コントロール":1,終結:0},communications:{立上げ:0,計画:1,実行:1,"監視・コントロール":1,終結:0},risk:{立上げ:0,計画:5,実行:1,"監視・コントロール":1,終結:0},procurement:{立上げ:0,計画:1,実行:1,"監視・コントロール":1,終結:0},stakeholder:{立上げ:1,計画:1,実行:1,"監視・コントロール":1,終結:0}},complexity:{integration:{立上げ:3,計画:5,実行:4,"監視・コントロール":5,終結:3},scope:{立上げ:0,計画:4,実行:0,"監視・コントロール":3,終結:0},schedule:{立上げ:0,計画:5,実行:0,"監視・コントロール":3,終結:0},cost:{立上げ:0,計画:4,実行:0,"監視・コントロール":4,終結:0},quality:{立上げ:0,計画:3,実行:3,"監視・コントロール":3,終結:0},resource:{立上げ:0,計画:3,実行:4,"監視・コントロール":3,終結:0},communications:{立上げ:0,計画:2,実行:3,"監視・コントロール":2,終結:0},risk:{立上げ:0,計画:5,実行:3,"監視・コントロール":3,終結:0},procurement:{立上げ:0,計画:3,実行:3,"監視・コントロール":3,終結:0},stakeholder:{立上げ:2,計画:3,実行:3,"監視・コントロール":3,終結:0}},importance:{integration:{立上げ:5,計画:5,実行:5,"監視・コントロール":5,終結:4},scope:{立上げ:0,計画:5,実行:0,"監視・コントロール":4,終結:0},schedule:{立上げ:0,計画:5,実行:0,"監視・コントロール":4,終結:0},cost:{立上げ:0,計画:4,実行:0,"監視・コントロール":5,終結:0},quality:{立上げ:0,計画:3,実行:3,"監視・コントロール":3,終結:0},resource:{立上げ:0,計画:3,実行:4,"監視・コントロール":3,終結:0},communications:{立上げ:0,計画:3,実行:4,"監視・コントロール":3,終結:0},risk:{立上げ:0,計画:5,実行:3,"監視・コントロール":4,終結:0},procurement:{立上げ:0,計画:2,実行:3,"監視・コントロール":3,終結:0},stakeholder:{立上げ:4,計画:4,実行:4,"監視・コントロール":4,終結:0}},difficulty:{integration:{立上げ:2,計画:4,実行:3,"監視・コントロール":4,終結:2},scope:{立上げ:0,計画:3,実行:0,"監視・コントロール":3,終結:0},schedule:{立上げ:0,計画:4,実行:0,"監視・コントロール":3,終結:0},cost:{立上げ:0,計画:4,実行:0,"監視・コントロール":4,終結:0},quality:{立上げ:0,計画:3,実行:3,"監視・コントロール":3,終結:0},resource:{立上げ:0,計画:3,実行:3,"監視・コントロール":3,終結:0},communications:{立上げ:0,計画:2,実行:2,"監視・コントロール":2,終結:0},risk:{立上げ:0,計画:5,実行:3,"監視・コントロール":3,終結:0},procurement:{立上げ:0,計画:3,実行:3,"監視・コントロール":3,終結:0},stakeholder:{立上げ:2,計画:3,実行:3,"監視・コントロール":3,終結:0}}};return t[c]||t.processCount},[c]);return l.useEffect(()=>{const t=()=>{if(g.current){const{width:i,height:d}=g.current.getBoundingClientRect();E({width:i,height:d})}};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),l.useEffect(()=>{var R;if(!f.current)return;const t=j(f.current);t.selectAll("*").remove();const{width:i,height:d}=u,n={top:120,right:60,bottom:60,left:200},H=i-n.left-n.right,D=d-n.top-n.bottom,z=Z().interpolator(_).domain([0,5]),m=Math.max(100,H/y.length),p=Math.max(40,D/v.length),w=t.append("g").attr("transform",`translate(${n.left},${n.top})`);t.append("rect").attr("width",i).attr("height",d).attr("fill","#f9fafb"),t.append("text").attr("x",i/2).attr("y",40).attr("text-anchor","middle").style("font-size","24px").style("font-weight","bold").style("fill","#111827").text("知識エリア別ヒートマップ"),t.append("text").attr("x",i/2).attr("y",65).attr("text-anchor","middle").style("font-size","14px").style("fill","#6b7280").text(((R=A.find(e=>e.id===c))==null?void 0:R.description)||""),w.selectAll(".process-group-label").data(y).enter().append("text").attr("class","process-group-label").attr("x",(e,s)=>s*m+m/2).attr("y",-10).attr("text-anchor","middle").style("font-size","14px").style("font-weight","600").style("fill","#374151").text(e=>e),w.selectAll(".knowledge-area-label").data(v).enter().append("text").attr("class","knowledge-area-label").attr("x",-10).attr("y",(e,s)=>s*p+p/2).attr("text-anchor","end").attr("dominant-baseline","middle").style("font-size","13px").style("fill","#374151").text(e=>e.name).style("cursor","pointer").on("click",(e,s)=>{const r=S.getTermByName(s.name);r&&h(r)});const C=w.selectAll(".heatmap-cell").data(v.flatMap((e,s)=>y.map((r,F)=>({area:e.id,areaName:e.name,group:r,value:b[e.id][r],x:F*m,y:s*p})))).enter().append("g").attr("class","heatmap-cell");C.append("rect").attr("x",e=>e.x).attr("y",e=>e.y).attr("width",m-2).attr("height",p-2).attr("rx",4).attr("fill",e=>e.value===0?"#e5e7eb":z(e.value)).attr("stroke","#fff").attr("stroke-width",2).style("cursor",e=>e.value>0?"pointer":"default").on("mouseenter",function(e,s){s.value>0&&(j(this).transition().duration(200).attr("stroke","#3b82f6").attr("stroke-width",3),T(s))}).on("mouseleave",function(e,s){j(this).transition().duration(200).attr("stroke","#fff").attr("stroke-width",2),T(null)}),C.append("text").attr("x",e=>e.x+m/2).attr("y",e=>e.y+p/2).attr("text-anchor","middle").attr("dominant-baseline","middle").style("font-size","20px").style("font-weight","bold").style("fill",e=>e.value>3?"#fff":"#374151").style("pointer-events","none").text(e=>e.value>0?e.value:"");const x=200,M=20,I=i-n.right-x-20,B=n.top-80,O=te().domain([0,5]).range([0,x]),L=ee(O).ticks(6).tickFormat(ae("d")),W=t.append("defs").append("linearGradient").attr("id","legend-gradient").attr("x1","0%").attr("x2","100%").attr("y1","0%").attr("y2","0%");for(let e=0;e<=10;e++)W.append("stop").attr("offset",`${e*10}%`).attr("stop-color",z(e/2));const k=t.append("g").attr("transform",`translate(${I},${B})`);k.append("rect").attr("width",x).attr("height",M).style("fill","url(#legend-gradient)"),k.append("g").attr("transform",`translate(0,${M})`).call(L),k.append("text").attr("x",x/2).attr("y",-5).attr("text-anchor","middle").style("font-size","12px").style("fill","#6b7280").text("値の範囲");const N=Y();t.append("g").attr("transform",`translate(${n.left},${d-40})`).selectAll(".stat").data([{label:"最高値",value:N.max,icon:X},{label:"平均値",value:N.avg.toFixed(1),icon:J},{label:"最低値",value:N.min,icon:se}]).enter().append("g").attr("class","stat").attr("transform",(e,s)=>`translate(${s*150},0)`);function Y(){const e=Object.values(b).flatMap(s=>Object.values(s).filter(r=>r>0));return{max:Math.max(...e),min:Math.min(...e),avg:e.reduce((s,r)=>s+r,0)/e.length}}},[u,b,c]),a.jsxs("div",{className:"w-full h-screen flex flex-col bg-gray-50",children:[a.jsx("div",{className:"bg-white shadow-sm border-b p-4",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center gap-6",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"表示指標:"}),a.jsx("div",{className:"flex gap-2",children:A.map(t=>a.jsx("button",{onClick:()=>q(t.id),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${c===t.id?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:t.name},t.id))})]})}),a.jsxs("button",{className:"flex items-center gap-2 text-sm text-gray-600 hover:text-gray-900",onClick:()=>{const t=S.getTermByName("ヒートマップ");t&&h(t)},children:[a.jsx(Q,{className:"w-4 h-4"}),"ヒートマップとは？"]})]})})}),a.jsxs("div",{ref:g,className:"flex-1 relative",children:[a.jsx("svg",{ref:f,className:"w-full h-full"}),o&&a.jsxs("div",{className:"absolute bg-gray-900 text-white p-3 rounded-lg shadow-lg pointer-events-none z-10",style:{left:`${u.width*.17+o.x+50}px`,top:`${u.height*.15+o.y-10}px`,transform:"translate(-50%, -100%)"},children:[a.jsx("div",{className:"text-sm font-semibold",children:o.areaName}),a.jsx("div",{className:"text-xs opacity-90",children:o.group}),a.jsx("div",{className:"text-lg font-bold mt-1",children:o.value})]})]}),$&&a.jsx(V,{term:$,onClose:()=>h(null),onNavigateToGlossary:t=>{G("/glossary",{state:{selectedTermId:t}})}})]})});ne.displayName="KnowledgeAreaHeatmap";export{ne as default};
