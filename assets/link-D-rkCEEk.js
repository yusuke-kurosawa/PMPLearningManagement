const g=Math.PI,M=2*g,c=1e-6,P=M-c;function w(s){this._+=s[0];for(let t=1,i=s.length;t<i;++t)this._+=arguments[t]+s[t]}function R(s){let t=Math.floor(s);if(!(t>=0))throw new Error(`invalid digits: ${s}`);if(t>15)return w;const i=10**t;return function(n){this._+=n[0];for(let h=1,o=n.length;h<o;++h)this._+=Math.round(arguments[h]*i)/i+n[h]}}class S{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?w:R(t)}moveTo(t,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,i){this._append`L${this._x1=+t},${this._y1=+i}`}quadraticCurveTo(t,i,n,h){this._append`Q${+t},${+i},${this._x1=+n},${this._y1=+h}`}bezierCurveTo(t,i,n,h,o,l){this._append`C${+t},${+i},${+n},${+h},${this._x1=+o},${this._y1=+l}`}arcTo(t,i,n,h,o){if(t=+t,i=+i,n=+n,h=+h,o=+o,o<0)throw new Error(`negative radius: ${o}`);let l=this._x1,p=this._y1,a=n-t,e=h-i,r=l-t,_=p-i,u=r*r+_*_;if(this._x1===null)this._append`M${this._x1=t},${this._y1=i}`;else if(u>c)if(!(Math.abs(_*a-e*r)>c)||!o)this._append`L${this._x1=t},${this._y1=i}`;else{let $=n-l,d=h-p,y=a*a+e*e,C=$*$+d*d,m=Math.sqrt(y),v=Math.sqrt(u),b=o*Math.tan((g-Math.acos((y+u-C)/(2*m*v)))/2),x=b/v,T=b/m;Math.abs(x-1)>c&&this._append`L${t+x*r},${i+x*_}`,this._append`A${o},${o},0,0,${+(_*$>r*d)},${this._x1=t+T*a},${this._y1=i+T*e}`}}arc(t,i,n,h,o,l){if(t=+t,i=+i,n=+n,l=!!l,n<0)throw new Error(`negative radius: ${n}`);let p=n*Math.cos(h),a=n*Math.sin(h),e=t+p,r=i+a,_=1^l,u=l?h-o:o-h;this._x1===null?this._append`M${e},${r}`:(Math.abs(this._x1-e)>c||Math.abs(this._y1-r)>c)&&this._append`L${e},${r}`,n&&(u<0&&(u=u%M+M),u>P?this._append`A${n},${n},0,1,${_},${t-p},${i-a}A${n},${n},0,1,${_},${this._x1=e},${this._y1=r}`:u>c&&this._append`A${n},${n},0,${+(u>=g)},${_},${this._x1=t+n*Math.cos(o)},${this._y1=i+n*Math.sin(o)}`)}rect(t,i,n,h){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}h${n=+n}v${+h}h${-n}Z`}toString(){return this._}}function k(s){return function(){return s}}function z(s){let t=3;return s.digits=function(i){if(!arguments.length)return t;if(i==null)t=null;else{const n=Math.floor(i);if(!(n>=0))throw new RangeError(`invalid digits: ${i}`);t=n}return s},()=>new S(t)}var A=Array.prototype.slice;function L(s){return s[0]}function q(s){return s[1]}function f(s,t){return[(t=+t)*Math.cos(s-=Math.PI/2),t*Math.sin(s)]}class B{constructor(t,i){this._context=t,this._x=i}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,i){switch(t=+t,i=+i,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,i,t,i):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+i)/2,t,this._y0,t,i);break}}this._x0=t,this._y0=i}}class I{constructor(t){this._context=t}lineStart(){this._point=0}lineEnd(){}point(t,i){if(t=+t,i=+i,this._point===0)this._point=1;else{const n=f(this._x0,this._y0),h=f(this._x0,this._y0=(this._y0+i)/2),o=f(t,this._y0),l=f(t,i);this._context.moveTo(...n),this._context.bezierCurveTo(...h,...o,...l)}this._x0=t,this._y0=i}}function N(s){return new B(s,!0)}function Z(s){return new I(s)}function H(s){return s.source}function Q(s){return s.target}function E(s){let t=H,i=Q,n=L,h=q,o=null,l=null,p=z(a);function a(){let e;const r=A.call(arguments),_=t.apply(this,r),u=i.apply(this,r);if(o==null&&(l=s(e=p())),l.lineStart(),r[0]=_,l.point(+n.apply(this,r),+h.apply(this,r)),r[0]=u,l.point(+n.apply(this,r),+h.apply(this,r)),l.lineEnd(),e)return l=null,e+""||null}return a.source=function(e){return arguments.length?(t=e,a):t},a.target=function(e){return arguments.length?(i=e,a):i},a.x=function(e){return arguments.length?(n=typeof e=="function"?e:k(+e),a):n},a.y=function(e){return arguments.length?(h=typeof e=="function"?e:k(+e),a):h},a.context=function(e){return arguments.length?(e==null?o=l=null:l=s(o=e),a):o},a}function X(){return E(N)}function j(){const s=E(Z);return s.angle=s.x,delete s.x,s.radius=s.y,delete s.y,s}export{j as a,X as l};
