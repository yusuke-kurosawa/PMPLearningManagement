# CLAUDE.md

このファイルは、Claude Code (claude.ai/code) がこのリポジトリのコードを扱う際のガイダンスを提供します。

## プロジェクト概要

PMPLearningManagementは、PMBOK（プロジェクトマネジメント知識体系）第6版の学習用インタラクティブWebアプリケーションです。49のプロセス、それらの関係性、およびITTO（インプット、ツールと技法、アウトプット）フレームワークを視覚的に理解するためのツールを提供します。

### 主な機能
- **PMBOKマトリックスビュー**: 10の知識エリアと5つのプロセス群で整理された49プロセスを表示するインタラクティブな表
- **ITTOネットワーク図**: D3.jsを使用したプロセス関係性を探索する力学的グラフ視覚化
- **統合ビュー**: 両方の視覚化を組み合わせた分割画面インターフェース
- **PMP用語集**: カテゴリフィルタリングと検索機能を備えた包括的な用語集
- **レスポンシブデザイン**: デスクトップとモバイルデバイスに完全最適化
- **GitHub Pagesデプロイ**: GitHub Actions経由で自動デプロイ

## 技術スタック

- **フロントエンドフレームワーク**: React 18.2 + React Router v6
- **視覚化**: ネットワーク図用のD3.js v7
- **スタイリング**: カスタムユーティリティ付きTailwind CSS v3
- **ビルドツール**: Vite v5
- **デプロイメント**: HashRouter使用のGitHub Pages
- **パッケージマネージャー**: npm
- **アイコン**: Lucide React

## 開発環境のセットアップ

### 前提条件
- Node.js 18+ 
- npm 8+

### コマンド
```bash
# 依存関係のインストール
npm install

# 開発サーバーの起動
npm run dev

# プロダクションビルド
npm run build

# プロダクションビルドのプレビュー
npm run preview

# GitHub Pagesへのデプロイ
npm run deploy

# リンターの実行
npm run lint

# リンティング問題の修正
npm run lint:fix
```

### 環境
- 開発サーバー: http://localhost:3000
- 本番URL: https://yusuke-kurosawa.github.io/PMPLearningManagement/

## プロジェクト構造

```
PMPLearningManagement/
├── src/
│   ├── components/
│   │   ├── PMBOKMatrix.jsx         # メインマトリックスビューコンポーネント
│   │   ├── ITTOForceGraph.jsx      # D3.jsネットワーク図
│   │   ├── ITTONetworkDiagram.jsx  # 代替ネットワークビュー
│   │   ├── IntegratedView.jsx      # 分割画面コンテナ
│   │   ├── Navigation.jsx          # トップナビゲーションバー
│   │   ├── Home.jsx                # ランディングページ
│   │   ├── PageTransition.jsx      # ページアニメーションラッパー
│   │   └── PMPGlossary.jsx         # PMP用語集
│   ├── data/
│   │   └── pmpGlossary.js          # 用語集データとカテゴリ定義
│   ├── hooks/
│   │   └── useDebounce.js          # 検索用デバウンスフック
│   ├── utils/
│   │   └── performance.js          # パフォーマンスユーティリティ
│   ├── App.jsx                     # ルーティング付きメインアプリ
│   ├── main.jsx                    # エントリーポイント
│   └── index.css                   # グローバルスタイルとTailwind
├── .github/
│   └── workflows/
│       └── deploy.yml              # GitHub Actionsデプロイメント
├── index.html                      # HTMLテンプレート
├── vite.config.js                  # Vite設定
├── tailwind.config.js              # Tailwind設定
├── postcss.config.js               # PostCSS設定
└── package.json                    # 依存関係とスクリプト
```

## アーキテクチャの決定事項

### ルーティング
- GitHub Pages互換性のため**HashRouter**を使用
- ルート:
  - `/` - ホームページ
  - `/matrix` - PMBOKマトリックスビュー
  - `/network` - 力学的ネットワーク図
  - `/integrated` - 分割画面ビュー
  - `/glossary` - PMP用語集

### 状態管理
- Reactフックによるローカルコンポーネント状態
- 現在グローバル状態管理は不要
- React.memoとuseMemoでパフォーマンス最適化

### スタイリングアプローチ
- ユーティリティファーストスタイリングのTailwind CSS
- index.cssのカスタムCSSアニメーション
- レスポンシブブレークポイント: sm (640px)、md (768px)、lg (1024px)

### パフォーマンス最適化
- すべての主要コンポーネントでReact.memo
- IntegratedViewでのドラッグ操作のスロットリング
- デバウンスされた検索入力
- React.Suspenseによる遅延読み込み
- 仮想スクロールユーティリティ（将来使用のため準備）

## コンポーネントガイドライン

### PMBOKMatrixコンポーネント
- 49のPMBOKプロセスすべてを表示
- 機能: 検索、展開/折りたたみ、プロセス詳細表示、ITTO情報
- モバイル: 水平スクロール、省略テキスト
- パフォーマンス: メモ化されたフィルタリング、ローディング状態
- 用語集リンク: ITTO内の用語をクリックして用語集へ遷移

### ITTOForceGraphコンポーネント
- プロセス関係性のD3.js力学シミュレーション
- ノードタイプ: プロセス（円）、インプット（ダイヤモンド）、ツール（正方形）、アウトプット（三角形）
- モバイル: 折りたたみ可能なコントロールパネル、タッチジェスチャー
- プロセス群と知識エリアによるフィルター

### IntegratedViewコンポーネント
- サイズ変更可能な分割画面レイアウト
- モバイル: ビュー間の切り替え
- デスクトップ: ディバイダーをドラッグしてサイズ変更
- 各パネルのフルスクリーンモード

### PMPGlossaryコンポーネント
- 45以上のPMP用語を収録
- 12のカテゴリによる分類とタグ付け
- リアルタイム検索機能（デバウンス付き）
- 関連用語のリンク
- PMBOKMatrixからの直接リンク対応

## モバイル対応の考慮事項

- タッチフレンドリーなタップターゲット（最小44px）
- 折りたたみ可能なナビゲーションとパネル
- レスポンシブなテキストサイズ
- タッチデバイス用に最適化されたフォースグラフ
- モバイルでの統合ビューのビュー切り替え

## デプロイメント

### GitHub Pagesセットアップ
- ベースパス: `/PMPLearningManagement/`
- ビルド出力: `dist/`ディレクトリ
- mainブランチへのプッシュで自動デプロイ
- 手動デプロイ: `npm run deploy`

### GitHub Actionsワークフロー
- mainブランチへのプッシュでトリガー
- gh-pagesブランチへビルドとデプロイ
- Node.js 18を使用
- npm依存関係をキャッシュ

## コードスタイルガイドライン

- フックを使用した関数コンポーネントを使用
- パフォーマンスクリティカルなコンポーネントにはReact.memoを実装
- セマンティックHTML要素を使用
- Tailwind CSSのベストプラクティスに従う
- コンポーネントを集中的で単一目的に保つ
- より良いUXのためローディング状態を追加
- 適切なエラーバウンダリを実装（今後の機能強化）

## 日本語ローカライゼーション

### 実装状況
- すべてのUI要素が日本語化済み
- 技術用語は英語を併記（例: プロジェクト憲章 (Project Charter)）
- モバイルでは表示領域を考慮して日本語のみ表示

### ガイドライン
- 専門用語は日本語と英語を併記
- UIラベルは簡潔な日本語表現を使用
- エラーメッセージは分かりやすい日本語で

## 今後の機能強化

1. **データ管理**
   - ITTO情報の外部データソース
   - ユーザー設定の永続化
   - エクスポート/インポート機能

2. **機能**
   - プロセス依存関係の視覚化
   - フラッシュカード付き学習モード
   - 進捗トラッキング
   - 多言語サポート（英語版の追加）
   - PMBOK第7版への対応

3. **技術**
   - Progressive Web App (PWA)サポート
   - オフライン機能
   - フィルター付き高度な検索
   - キーボードショートカット
   - アクセシビリティの向上（WCAG 2.1準拠）

## トラブルシューティング

### よくある問題

1. **ビルドエラー**
   - Node.js 18+がインストールされていることを確認
   - node_modulesをクリアして再インストール: `rm -rf node_modules && npm install`
   - 設定ファイルのESモジュール構文を確認

2. **GitHub Pages 404**
   - デプロイの伝播に2-5分待つ
   - リポジトリ設定でGitHub Pagesが有効になっていることを確認
   - vite.config.jsのベースパスを確認
   - HashRouterを使用していることを確認

3. **D3.jsパフォーマンス**
   - モバイルでは表示ノード数を制限
   - ドラッグ操作にスロットリングを使用
   - 大規模データセットにはWebGLレンダラーを検討

4. **日本語表示の問題**
   - UTF-8エンコーディングを確認
   - 適切なフォントがロードされていることを確認

## 重要な注意事項

- GitHub Pagesデプロイには常にHashRouterを使用
- デプロイ前にモバイルレスポンシブネスをテスト
- バンドルサイズを制御下に保つ（現在: ~95KB gzip圧縮）
- アクセシビリティ標準を維持（WCAG 2.1）
- コミットで破壊的変更を文書化
- 用語集の更新時は検索インデックスも更新

